{"version":3,"sources":["file:///C:/Users/HUAWEI/Desktop/TK2/assets/text/speedaffect0.ts"],"names":["_decorator","Component","PlayerController0","ccclass","property","speedaffect0","playercontroller0","originalMagnification","changedMagnification","isChanging","changeDuration","changeTimer","start","node","parent","getComponent","speed","update","deltaTime","currentMagnification"],"mappings":";;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,iB,iBAAAA,iB;;;;;;;;;AAAoC;OACvC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;8BAGjBK,Y,WADZF,OAAO,CAAC,cAAD,C,gBAAR,MACaE,YADb,SACkCJ,SADlC,CAC4C;AAAA;AAAA;AAAA,eAEhCK,iBAFgC,GAEc,IAFd;AAAA,eAIhCC,qBAJgC,GAIA,CAJA;AAIG;AAJH,eAKhCC,oBALgC,GAKD,CALC;AAKE;AALF,eAMhCC,UANgC,GAMV,KANU;AAMH;AANG,eAOhCC,cAPgC,GAOP,CAPO;AAOJ;AAPI,eAQhCC,WARgC,GAQV,CARU;AAAA;;AAQP;AAEjCC,QAAAA,KAAK,GAAG;AACJ;AACA,eAAKN,iBAAL,GAAyB,KAAKO,IAAL,CAAUC,MAAV,CAAiBC,YAAjB;AAAA;AAAA,qDAAzB,CAFI,CAGJ;;AACA,cAAI,KAAKT,iBAAT,EAA4B;AACxB,iBAAKC,qBAAL,GAA6B,KAAKD,iBAAL,CAAuBU,KAApD;AACA,iBAAKR,oBAAL,GAA4B,KAAKD,qBAAjC,CAFwB,CAEgC;AAC3D;AACJ;;AAEDU,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,cAAI,KAAKZ,iBAAT,EAA4B;AACxB,gBAAIa,oBAAoB,GAAG,KAAKb,iBAAL,CAAuBU,KAAlD,CADwB,CAGxB;;AACA,gBAAIG,oBAAoB,KAAK,KAAKX,oBAA9B,IAAsD,CAAC,KAAKC,UAAhE,EAA4E;AACxE;AACA,mBAAKA,UAAL,GAAkB,IAAlB;AACA,mBAAKE,WAAL,GAAmB,CAAnB;AACA,mBAAKH,oBAAL,GAA4BW,oBAA5B,CAJwE,CAItB;AACrD,aATuB,CAWxB;;;AACA,gBAAI,KAAKV,UAAT,EAAqB;AACjB,mBAAKE,WAAL,IAAoBO,SAApB,CADiB,CAGjB;;AACA,kBAAI,KAAKP,WAAL,IAAoB,KAAKD,cAA7B,EAA6C;AACzC;AACA,qBAAKJ,iBAAL,CAAuBU,KAAvB,GAA+B,KAAKT,qBAApC;AACA,qBAAKE,UAAL,GAAkB,KAAlB,CAHyC,CAGhB;AAC5B;AACJ;AACJ;AACJ;;AA5CuC,O","sourcesContent":["\r\nimport { _decorator, Component, Node, Prefab } from 'cc';\r\nimport { PlayerController0 } from './tank0'; // ȷ����ȷ���� PlayerController0 ��\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('speedaffect0')\r\nexport class speedaffect0 extends Component {\r\n\r\n    private playercontroller0: PlayerController0 | null = null;\r\n\r\n    private originalMagnification: number = 0; // ��ʼ�� magnification ֵ\r\n    private changedMagnification: number = 0; // �仯��� magnification ֵ\r\n    private isChanging: boolean = false; // �Ƿ����ڱ仯\r\n    private changeDuration: number = 5; // �仯����ʱ�䣬��λ����\r\n    private changeTimer: number = 0; // �仯��ʱ��\r\n\r\n    start() {\r\n        // ��ȡ PlayerController0 �� firedirection0 ��ʵ��\r\n        this.playercontroller0 = this.node.parent.getComponent(PlayerController0);\r\n        // ��ʼ��¼��ǰ�� magnification ֵ\r\n        if (this.playercontroller0) {\r\n            this.originalMagnification = this.playercontroller0.speed;\r\n            this.changedMagnification = this.originalMagnification; // ��ʼʱ���仯���ֵ����ԭʼֵ\r\n        }\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        if (this.playercontroller0) {\r\n            let currentMagnification = this.playercontroller0.speed;\r\n\r\n            // ��鵱ǰֵ�Ƿ���仯���ֵ��ͬ���Ҳ����ڱ仯״̬\r\n            if (currentMagnification !== this.changedMagnification && !this.isChanging) {\r\n                // magnification �����˱仯����ʼ��ʱ\r\n                this.isChanging = true;\r\n                this.changeTimer = 0;\r\n                this.changedMagnification = currentMagnification; // ���±仯���ֵΪ��ǰֵ\r\n            }\r\n\r\n            // ������ڱ仯״̬����ʱ���ۼ�\r\n            if (this.isChanging) {\r\n                this.changeTimer += deltaTime;\r\n\r\n                // �����ʱ�ﵽ�趨ʱ��\r\n                if (this.changeTimer >= this.changeDuration) {\r\n                    // �� magnification �ظ���ԭʼֵ\r\n                    this.playercontroller0.speed = this.originalMagnification;\r\n                    this.isChanging = false; // �仯����\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n"]}
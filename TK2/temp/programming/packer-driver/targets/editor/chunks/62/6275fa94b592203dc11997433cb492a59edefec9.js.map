{"version":3,"sources":["file:///D:/TankFight/TK2/assets/text/cheat-test.ts"],"names":["_decorator","Component","Node","systemEvent","SystemEventType","macro","PlayerController0","ccclass","property","TankCheatController","cheatCode","onLoad","on","KEY_DOWN","onKeyDown","onDestroy","off","event","key","keyCode","KEY","a","z","A","Z","keyName","String","fromCharCode","toLowerCase","playercontroller0","tankNode","getComponent","magnification"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAYC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,e,OAAAA,e;AAAgCC,MAAAA,K,OAAAA,K;;AAChFC,MAAAA,iB,iBAAAA,iB;;;;;;;;;AAAoC;OACvC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;qCAGjBS,mB,WADZF,OAAO,CAAC,qBAAD,C,UAGHC,QAAQ,CAACN,IAAD,C,2BAHb,MACaO,mBADb,SACyCR,SADzC,CACmD;AAAA;AAAA;;AAC/C;AAD+C;;AAK/C;AAL+C,eAM/CS,SAN+C,GAM3B,EAN2B;AAAA;;AAQ/CC,QAAAA,MAAM,GAAG;AACL;AACAR,UAAAA,WAAW,CAACS,EAAZ,CAAeR,eAAe,CAACS,QAA/B,EAAyC,KAAKC,SAA9C,EAAyD,IAAzD;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACR;AACAZ,UAAAA,WAAW,CAACa,GAAZ,CAAgBZ,eAAe,CAACS,QAAhC,EAA0C,KAAKC,SAA/C,EAA0D,IAA1D;AACH;;AAEDA,QAAAA,SAAS,CAACG,KAAD,EAAuB;AAC5B;AACA,cAAIC,GAAG,GAAGD,KAAK,CAACE,OAAhB,CAF4B,CAG5B;;AACA,cAAKD,GAAG,IAAIb,KAAK,CAACe,GAAN,CAAUC,CAAjB,IAAsBH,GAAG,IAAIb,KAAK,CAACe,GAAN,CAAUE,CAAxC,IAA+CJ,GAAG,IAAIb,KAAK,CAACe,GAAN,CAAUG,CAAjB,IAAsBL,GAAG,IAAIb,KAAK,CAACe,GAAN,CAAUI,CAA1F,EAA8F;AAC1F,gBAAIC,OAAO,GAAGC,MAAM,CAACC,YAAP,CAAoBT,GAApB,CAAd;AACA,iBAAKR,SAAL,IAAkBe,OAAO,CAACG,WAAR,EAAlB,CAF0F,CAG1F;;AACA,gBAAI,KAAKlB,SAAL,KAAmB,UAAvB,EAAmC;AAE/B;AACA,oBAAMmB,iBAAoC,GAAG,KAAKC,QAAL,CAAcC,YAAd;AAAA;AAAA,yDAA7C;;AACA,kBAAIF,iBAAJ,EAAuB;AACnBA,gBAAAA,iBAAiB,CAACG,aAAlB,GAAkC,EAAlC;AACH,eAN8B,CAO/B;;;AACA,mBAAKtB,SAAL,GAAiB,EAAjB;AACH;AACJ,WAdD,MAcO;AACH;AACA,iBAAKA,SAAL,GAAiB,EAAjB;AACH;AACJ;;AAxC8C,O;;;;;iBAG9B,I","sourcesContent":["import { _decorator, Component, Node, Vec3, systemEvent, SystemEventType, EventKeyboard, macro } from 'cc';\r\nimport { PlayerController0 } from './tank0'; // 确保正确引入 PlayerController0 类\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TankCheatController')\r\nexport class TankCheatController extends Component {\r\n    // 引用你的坦克节点或坦克组件，这里假设为 tankNode\r\n    @property(Node)\r\n    tankNode: Node = null;\r\n\r\n    // 秘籍输入\r\n    cheatCode: string = \"\";\r\n\r\n    onLoad() {\r\n        // 监听键盘事件\r\n        systemEvent.on(SystemEventType.KEY_DOWN, this.onKeyDown, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        // 移除键盘事件监听\r\n        systemEvent.off(SystemEventType.KEY_DOWN, this.onKeyDown, this);\r\n    }\r\n\r\n    onKeyDown(event: EventKeyboard) {\r\n        // 获取按下的键名\r\n        let key = event.keyCode;\r\n        // 检查是否是字母键\r\n        if ((key >= macro.KEY.a && key <= macro.KEY.z) || (key >= macro.KEY.A && key <= macro.KEY.Z)) {\r\n            let keyName = String.fromCharCode(key);\r\n            this.cheatCode += keyName.toLowerCase();\r\n            // 检查是否匹配秘籍代码\r\n            if (this.cheatCode === \"zhaoyibo\") {\r\n\r\n                // 找到 PlayerController0 组件并进行操作\r\n                const playercontroller0: PlayerController0 = this.tankNode.getComponent(PlayerController0);\r\n                if (playercontroller0) {\r\n                    playercontroller0.magnification = 20;\r\n                }\r\n                // 清空秘籍输入，以便下一次使用\r\n                this.cheatCode = \"\";\r\n            }\r\n        } else {\r\n            // 如果按下的不是字母键，则清空秘籍输入\r\n            this.cheatCode = \"\";\r\n        }\r\n    }\r\n}\r\n"]}
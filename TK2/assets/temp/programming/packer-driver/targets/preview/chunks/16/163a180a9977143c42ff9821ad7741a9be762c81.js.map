{"version":3,"sources":["file:///C:/Users/charon/Desktop/TK2/assets/text/fireaffect1.ts"],"names":["_decorator","Component","firedirection1","ccclass","property","fireaffect1","playercontroller0","originalMagnification","changedMagnification","isChanging","changeDuration","changeTimer","start","node0","node","parent","getChildByName","getComponent","fireInterval","update","deltaTime","currentMagnification"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,c,iBAAAA,c;;;;;;;;;AAA0C;OAC7C;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;6BAGjBK,W,WADZF,OAAO,CAAC,aAAD,C,gBAAR,MACaE,WADb,SACiCJ,SADjC,CAC2C;AAAA;AAAA;AAAA,eAE/BK,iBAF+B,GAEY,IAFZ;AAAA,eAI/BC,qBAJ+B,GAIC,CAJD;AAII;AAJJ,eAK/BC,oBAL+B,GAKA,CALA;AAKG;AALH,eAM/BC,UAN+B,GAMT,KANS;AAMF;AANE,eAO/BC,cAP+B,GAON,CAPM;AAOH;AAPG,eAQ/BC,WAR+B,GAQT,CARS;AAAA;;AAQN;AAEjCC,QAAAA,KAAK,GAAG;AACJ,cAAIC,KAAK,GAAG,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,cAAjB,CAAgC,eAAhC,CAAZ,CADI,CAEJ;;AAEA,eAAKV,iBAAL,GAAyBO,KAAK,CAACI,YAAN;AAAA;AAAA,+CAAzB,CAJI,CAMJ;;AACA,cAAI,KAAKX,iBAAT,EAA4B;AACxB,iBAAKC,qBAAL,GAA6B,KAAKD,iBAAL,CAAuBY,YAApD;AACA,iBAAKV,oBAAL,GAA4B,KAAKD,qBAAjC,CAFwB,CAEgC;AAC3D;AACJ;;AAEDY,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,cAAI,KAAKd,iBAAT,EAA4B;AACxB,gBAAIe,oBAAoB,GAAG,KAAKf,iBAAL,CAAuBY,YAAlD,CADwB,CAGxB;;AACA,gBAAIG,oBAAoB,KAAK,KAAKb,oBAA9B,IAAsD,CAAC,KAAKC,UAAhE,EAA4E;AAExE;AACA,mBAAKA,UAAL,GAAkB,IAAlB;AACA,mBAAKE,WAAL,GAAmB,CAAnB;AACA,mBAAKH,oBAAL,GAA4Ba,oBAA5B,CALwE,CAKtB;AACrD,aAVuB,CAYxB;;;AACA,gBAAI,KAAKZ,UAAT,EAAqB;AACjB,mBAAKE,WAAL,IAAoBS,SAApB,CADiB,CAGjB;;AACA,kBAAI,KAAKT,WAAL,IAAoB,KAAKD,cAA7B,EAA6C;AACzC;AACA,qBAAKJ,iBAAL,CAAuBY,YAAvB,GAAsC,KAAKX,qBAA3C;AACA,qBAAKE,UAAL,GAAkB,KAAlB,CAHyC,CAGhB;AAC5B;AACJ;AACJ;AACJ;;AAhDsC,O","sourcesContent":["import { _decorator, Component, Node, Prefab } from 'cc';\r\nimport { firedirection1 } from './firedirection1'; // ȷ����ȷ���� firedirection0 ��\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('fireaffect1')\r\nexport class fireaffect1 extends Component {\r\n\r\n    private playercontroller0: firedirection1 | null = null;\r\n\r\n    private originalMagnification: number = 0; // ��ʼ�� fireInterval ֵ\r\n    private changedMagnification: number = 0; // �仯��� fireInterval ֵ\r\n    private isChanging: boolean = false; // �Ƿ����ڱ仯\r\n    private changeDuration: number = 5; // �仯����ʱ�䣬��λ����\r\n    private changeTimer: number = 0; // �仯��ʱ��\r\n\r\n    start() {\r\n        let node0 = this.node.parent.getChildByName('firedirection');\r\n        // ��ȡ PlayerController0 �� firedirection0 ��ʵ��\r\n\r\n        this.playercontroller0 = node0.getComponent(firedirection1);\r\n\r\n        // ��ʼ��¼��ǰ�� magnification ֵ\r\n        if (this.playercontroller0) {\r\n            this.originalMagnification = this.playercontroller0.fireInterval;\r\n            this.changedMagnification = this.originalMagnification; // ��ʼʱ���仯���ֵ����ԭʼֵ\r\n        }\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        if (this.playercontroller0) {\r\n            let currentMagnification = this.playercontroller0.fireInterval;\r\n\r\n            // ��鵱ǰֵ�Ƿ���仯���ֵ��ͬ���Ҳ����ڱ仯״̬\r\n            if (currentMagnification !== this.changedMagnification && !this.isChanging) {\r\n\r\n                // magnification �����˱仯����ʼ��ʱ\r\n                this.isChanging = true;\r\n                this.changeTimer = 0;\r\n                this.changedMagnification = currentMagnification; // ���±仯���ֵΪ��ǰֵ\r\n            }\r\n\r\n            // ������ڱ仯״̬����ʱ���ۼ�\r\n            if (this.isChanging) {\r\n                this.changeTimer += deltaTime;\r\n\r\n                // �����ʱ�ﵽ�趨ʱ��\r\n                if (this.changeTimer >= this.changeDuration) {\r\n                    // �� magnification �ظ���ԭʼֵ\r\n                    this.playercontroller0.fireInterval = this.originalMagnification;\r\n                    this.isChanging = false; // �仯����\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n"]}